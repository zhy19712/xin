{include file="../../public/common_header"}
<script src="__PUBLIC__/jquery/jquery.min.js"></script>
<style>

    #nodeZtree .ztree-title i.fa {
        width: 18%;
    }
    #nodeZtree .ztree-title #add {
        margin-left: 6px;
    }
    .ztree{
        margin-top: 0;
    }
    #keywords{
        margin-top: 34px;
    }
    #tableContent .mybtn i.fa:before,#tableContent .assModel i.fa:before,#tableContent .move i.fa:before,#tableContent .file i.fa:before,#tableContent .oneKeyArchiv i.fa:before {
        background: #00c0ef;
        color: #ffffff;
    }
    #tableContent .mybtn,#tableContent .assModel,#tableContent .move,#tableContent .file,#tableContent .oneKeyArchiv{
        float: right;
        background-color: #00c0ef;
    }
    #tableContent .mybtn{
        margin-right: 10px;
        margin-bottom: 5px;
    }
    #tableContent .assModel{
        margin-right: 10px;
        margin-bottom: 5px;
    }
    #tableContent table.dataTable.no-footer {
        border-top: 1px dotted;
    }
    #tableContent #funKuai{
        width: 100%;
        position: absolute;
        left: 72%;
    }
    #tableContent #funKuai>span{
        background-color: #00c0ef;
        margin-left: 5px;
        color: #FFFFFF;
    }
    #tableContent #funKuai>span i.fa:before {
        padding-right: 3px;
        color: #FFFFFF;
    }
    #tableContent #tableItem_filter {
        float: left;
    }
    #tableContent .select-color {
        background-color: #FDD5B5 !important;
    }
    #tableContent h3 {
        margin-top: 5px;
        font-weight: 600;
        font-size: 16px;
        display: inline-block;
    }
    #tableContent .ibox-tools {
        float: right;
        margin-right: 30px;
        margin-top: 10px;
    }
    #tableContent .ibox-tools2 {
        float: right;
        margin-right: 15px;
    }
    #tableContent .dataTables_wrapper .dataTables_scroll {
        position: relative;
        top: 15px;
        border-top: 1px dotted #cecece;
    }
    #tableContent #tableItem tr td a{
        color: #337ab7;
    }
    #tableContent .dataTables_wrapper {
        display: block;
    }
    .inputRemark{
        width: 100%;
        height: 100%;
        border: none;
    }
</style>

<div id="nodeZtree" data-options="region:'west',title:'文档目录树',split:true" style="width:260px;">
    <div class="ztree-title">
        <i id="add" title="新增节点" class="fa fa-lg fa-sitemap" onclick="addNodetree()"></i>
        <i title="编辑节点" class="fa fa-lg fa-pencil" onclick="editNodetree()"></i>
        <i title="删除节点" class="fa fa-lg fa-trash" onclick="delNodetree()"></i>
        <!--<i title="下移" class="fa fa-lg fa-arrow-circle-down" id="downMoveNode"></i>-->
        <!--<i title="上移" class="fa fa-lg fa-arrow-circle-up" id="upMoveNode"></i>-->
        <i title="展开所有" class="fa fa-lg fa-plus-square" id="openNode"></i>
        <i title="收起所有" class="fa fa-lg fa-minus-square" id="closeNode"></i>
    </div>
    <input id="keywords" class="layui-input" type="text" placeholder="搜索">
    <ul class="ztree" id="ztree"></ul>
</div>
<div id="tableContent" data-options="region:'center',title:'当前路径：'" style="padding:5px;background:#ffffff;">
    <table id="tableItem" class="table table-striped table-bordered cell-border" cellspacing="0"  width="100%">
        <thead>
        <tr>
            <th>文件名称</th>
            <th>创建时间</th>
            <th>文件大小</th>
            <th>上传人</th>
            <th>描述</th>
            <th>操作</th>
        </tr>
        </thead>
    </table>
    <div class="info"></div>
    <div id="form_container"></div>
    <div class="tbcontainer">
        <div class="mark"></div>
    </div>
</div>


{include file="../../public/common_footer"}
<script src="__WEBSITE__/archive/document/index1.js"></script>
</body>
<script type="text/javascript">

  // $(".mybtn >div").click(function () {
  //     if (!selfid) {
  //         layer.msg("请选择节点", {time: 1500, shade: 0.1});
  //         return;
  //     }else if(selfid){
  //         $(".mybtn >div").attr("id","test3");
  // $("#picker").click(function(){
  //    uploader = WebUploader.create({
  //        auto: true,
  //        // swf文件路径
  //        swf:  '/static/public/webupload/Uploader.swf',
  //
  //        // 文件接收服务端。
  //        server: "{:url('admin/common/upload?module=document&use=archive')}",
  //
  //        // 选择文件的按钮。可选。
  //        // 内部根据当前运行是创建，可能是input元素，也可能是flash.
  //        pick: {
  //            multiple: false,
  //            id: "#picker",
  //            innerHTML: "上传文件"
  //        },
  //        // 不压缩image, 默认如果是jpeg，文件上传前会压缩一把再上传！
  //        resize: false
  //    });
  //    var $list = $('#addName');
  //    uploader.on( 'fileQueued', function( file ) {
  //        $list.val('等待上传...');
  //    });
  //
  //    uploader.on( 'uploadSuccess', function( file,res) {
  //        $list.val('已上传成功');
  //        console.log(res)
  //
  //        // if(res.code == 2){
  //        //     uploadId = res.id;
  //        //     $.ajax({
  //        //         url:"{:url('documenttype/add')}",
  //        //         data:{
  //        //             name: uploadName, //名称
  //        //             attachmentId: uploadId,  //文档关联Id
  //        //             type:selfid,
  //        //         },
  //        //         type:'post',
  //        //         success:function(res) {
  //        //             console.log(res)
  //        //             if(res.code == 1) {
  //        //                 var url = "{:url('/archive/common/datatablesPre')}?tableName=archive_document&id="+selfid;
  //        //                 tableItem.ajax.url(url).load();
  //        //             } else {
  //        //                 layer.msg('获取数据失败！');
  //        //             }
  //        //         }
  //        //     })
  //        //     layer.msg("上传成功！",{time:1500})
  //        // }else{
  //        //     layer.msg("上传失败！",{time:1500})
  //        // }
  //    });
  //
  //    uploader.on( 'uploadError', function( file ) {
  //        $list.val('上传出错');
  //    });
  // });
  // layui.upload.render({
  //     elem: '#test3',
  //     url: "{:url('admin/common/upload?module=document&use=archive')}",
  //     accept: 'file',//普通文件
  //     exts: 'doc|docx|pdf',
  //     before: function(obj){
  //         obj.preview(function(index, file, result){
  //             uploadName = file.name;
  //             console.log(file.name);//获取文件名，result就是base64
  //         })
  //     },
  //     done: function(res){
  //         console.log(res)
  //         if(res.code == 2){
  //             uploadId = res.id;
  //             $.ajax({
  //                 url:"{:url('documenttype/add')}",
  //                 data:{
  //                     name: uploadName, //名称
  //                     attachmentId: uploadId,  //文档关联Id
  //                     type:selfid,
  //                 },
  //                 type:'post',
  //                 success:function(res) {
  //                     console.log(res)
  //                     if(res.code == 1) {
  //                         var url = "{:url('/archive/common/datatablesPre')}?tableName=archive_document&id="+selfid;
  //                         tableItem.ajax.url(url).load();
  //                     } else {
  //                         layer.msg('获取数据失败！');
  //                     }
  //                 }
  //             })
  //             layer.msg("上传成功！",{time:1500})
  //         }else{
  //             layer.msg("上传失败！",{time:1500})
  //         }
  //     },
  // });
  //     }
  // });



  //关联模型
  $("#model").click(function (){
    if (!clickId) {
      layer.msg("请先选择一条数据！", {time: 1500, shade: 0.1});
      return;
    }else {
      document.cookie="unitId="+clickId;
      window.open('./association');
    }
  });

</script>
</html>